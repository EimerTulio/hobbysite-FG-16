{% extends "base.html" %}

{% block content %}
<h1>Blog Articles</h1>

{% if user.is_authenticated %}
<a href="{% url 'article_create' %}">Create New Article</a>

<h2>Your Articles</h2>
<ul>
    {% for article in user_articles %}
        <li>
            <a href="{% url 'article_detail' article.id %}">{{ article.title }}</a>
            {% if user.profile == article.author %}
                <a href="{% url 'article_update' article.id %}">Edit</a>
            {% endif %}
        </li>
    {% empty %}
        <li>You haven't written any articles yet</li>
    {% endfor %}
</ul>
{% endif %}

<h2>All Articles</h2>
{% for category in categories %}
    <h3>{{ category.name }}</h3>
    <ul>
        {% for article in category.article_set.all %}
            <li>
                <a href="{% url 'article_detail' article.id %}">{{ article.title }}</a>
            </li>
        {% empty %}
            <li>No articles in this category</li>
        {% endfor %}
    </ul>
{% endfor %}
{% endblock %}